<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie+=edge">
    <script src="https://use.fontawesome.com/1aa5fbe960.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/1aa5fbe960.css"> 
    <title>Blog</title>

    <!--Styles-->
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>

  <nav class="navbar">
    <a href="#" class="navbar-brand">Blog<span>Scape</span></a>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="#">Blog</a></li>
      <li><a href="about.html">About Me</a></li>
      <li><a href="login.html" id="loginButton">Logout</a></li>
    </ul>
    <button class="navbar-toggler">
      <span></span>
    </button>
  </nav>
  <div class="content">
    
  <div class="container">
    <div class="w3-content w3-section">
      <img class="mySlides" src="images/bg.jpg">
      <img class="mySlides" src="images/bg2.jpg">
      <img class="mySlides" src="images/bg3.jpg">
    </div>
    <div class="centered">Welcome to my Blog</div>
  </div>
  <div class="row" id="blog">
    <div class="leftcolumn" id="featured_blogs">
    </div>

        <div class="rightcolumn">
          <div class="card">
            <h2>About Me</h2>
            <img src="/images/aboutmeimg.jpg" height="100px" />
            <p>Some text about me Some text about me Some text about me ..</p>
          </div>
          <div class="card">
            <h3>Popular Post</h3>
            <div class="fakeimg">Image</div>
            <br>
            <div class="fakeimg">Image</div>
            <br>
            <div class="fakeimg">Image</div>
          </div>
          <div class="card">
            <h3>Follow Me</h3>
            <div class="icons">
              <a href="#"><i class="fa fa-facebook-square" aria-hidden="true"></i></a>
              <a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a>
              <a href="#"><i class="fa fa-twitter-square" aria-hidden="true"></i></a>
              <a href="#"><i class="fa fa-snapchat-square" aria-hidden="true"></i></a>
            </div>
          </div>
        </div>
  </div>
</div>
      <div class="footer">
        <p>BlogScape © Satelenn. All rights reserved.</p>
        </div>

<script src="./js/scripts.js"></script>
<script>

   
const queryString = window.location.search;
console.log(queryString);
const urlParams = new URLSearchParams(queryString);
const user = urlParams.get('user');
let loginButton = document.getElementById("loginButton");
user_section.innerHTML = user;
if(user){
  loginButton.innerHTML ="Logout";
}
</script>



<script>
function shorten(text, maxLength) {
var ret = text;
if (ret.length > maxLength) {
ret = ret.substr(0,maxLength-3) + '…';
}
return ret;
}

  let blog = document.getElementById("featured_blogs");
  fetch('https://my-json-server.typicode.com/sathelyn/blogspot/posts')
  .then((response) => {
    if (response.status !== 200) {
      console.log('Looks like there was a problem. Status Code: ' + response.status);
      return;
    }
    response.json().then((data) =>{
      data.map((posts)=>{
        blog.classList.add("card");
        blog.innerHTML +=`<div class="card">`;
          blog.innerHTML += `<h2 class="blog-title" >${posts.title}</h2>`;
          blog.innerHTML += `<p class="blog-description">${posts.description}</p>`;
          blog.innerHTML += `<span class="blog-date"><small>${posts.date}</small></span>`;
          blog.innerHTML += `<img src="${posts.image}" width="100%" height="200px" style="object-fit: cover"/>`;
          blog.innerHTML += `<p>Best part..</p>`;
          blog.innerHTML += `<p class="blog-content">${shorten(posts.content, 200)}<span id="dots">...</span></p>`;
          blog.innerHTML += `<a href="blog.html/${posts.id}" class="myButton">Read more</a>`;
        
          blog.innerHTML += `</div>`;
          
        });
      

        
         
  


          

    });
  }
)
.catch((err) => {
console.log('Fetch Error :-S', err);
});
</script>
</body>
</html>